
mode: "managed"
account:
  address: "0x49e0fd3800C117357057534E30c5B5115C673488"
  salt: 16
  # deployer address: 0xA4D5208390Ce0d0EFF30239980B4a0439D730277

dependencies:
  - "token-faucet" # TokenFaucet: 0x746789E5B988e9dA56552fe6dE6eC671C01A2336
  - "weth9" # WETH9: 0x2cE89A6c99B45d1b62c1c07cAF731bF12d88C293
  - "tether" # TetherToken: 0x9DD32D4F511996EFff334B6f4c1229757b963AA2
  - "usdc" # USDC: 0x675d653aFC71A433ca5586ed4d52e64b5FFFE787
  - "uniswap-v2" # UniswapV2Router02: 0xc5B3F18273D1CEF2A8cFd9e73Cdf78c9504D2512

steps:
  - # create PairLiquidityProvider (0xA2Ed4D0D86fE2709807A337F50D17b4F43c76b68)
    action: "create"
    bytecode: "608060405234801561001057600080fd5b506040516109c83803806109c883398101604081905261002f91610087565b600080546001600160a01b03199081163317909155600180546001600160a01b03948516908316179055600280549290931691161790556100ba565b80516001600160a01b038116811461008257600080fd5b919050565b6000806040838503121561009a57600080fd5b6100a38361006b565b91506100b16020840161006b565b90509250929050565b6108ff806100c96000396000f3fe6080604052600436106100435760003560e01c8063150b7a021461004f5780631b8b921d1461009957806375b45179146100ae578063d6d2b6ba146100dc57600080fd5b3661004a57005b600080fd5b34801561005b57600080fd5b5061007b61006a3660046106d1565b630a85bd0160e11b95945050505050565b6040516001600160e01b031990911681526020015b60405180910390f35b6100ac6100a7366004610740565b6100fc565b005b6100c16100bc366004610793565b6101d3565b60408051938452602084019290925290820152606001610090565b3480156100e857600080fd5b506100ac6100f7366004610740565b6104eb565b6000546001600160a01b0316331461012f5760405162461bcd60e51b8152600401610126906107d5565b60405180910390fd5b6000836001600160a01b031634848460405161014c9291906107f8565b60006040518083038185875af1925050503d8060008114610189576040519150601f19603f3d011682016040523d82523d6000602084013e61018e565b606091505b50509050806101cd5760405162461bcd60e51b815260206004820152600b60248201526a18d85b1b0819985a5b195960aa1b6044820152606401610126565b50505050565b60008054819081906001600160a01b031633146102025760405162461bcd60e51b8152600401610126906107d5565b6002546001600160a01b0388811691161461022f5760015461022f9088906001600160a01b03168761056c565b6002546001600160a01b0387811691161461025c5760015461025c9087906001600160a01b03168661056c565b6002546001600160a01b03908116908816036102ff5760015460405163f305d71960e01b81526001600160a01b039091169063f305d7199034906102af908a9089906000908c9030904290600401610808565b60606040518083038185885af11580156102cd573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906102f29190610843565b9094509092509050610449565b6002546001600160a01b03908116908716036103a15760015460405163f305d71960e01b81526001600160a01b039091169063f305d719903490610352908b908a906000908b9030904290600401610808565b60606040518083038185885af1158015610370573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906103959190610843565b91945092509050610449565b60015460405162e8e33760e81b81526001600160a01b0389811660048301528881166024830152604482018890526064820187905260006084830181905260a48301523060c48301524260e48301529091169063e8e3370090610104016060604051808303816000875af115801561041d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104419190610843565b919450925090505b47156104e157604051600090329047908381818185875af1925050503d8060008114610491576040519150601f19603f3d011682016040523d82523d6000602084013e610496565b606091505b50509050806104df5760405162461bcd60e51b815260206004820152601560248201527419985a5b1959081d1bc81cd95b99081c99599d5b99605a1b6044820152606401610126565b505b9450945094915050565b6000546001600160a01b031633146105155760405162461bcd60e51b8152600401610126906107d5565b6000836001600160a01b031683836040516105319291906107f8565b600060405180830381855af49150503d8060008114610189576040519150601f19603f3d011682016040523d82523d6000602084013e61018e565b604080516001600160a01b038481166024830152604480830185905283518084039091018152606490920183526020820180516001600160e01b031663095ea7b360e01b17905291516000928392908716916105c89190610871565b6000604051808303816000865af19150503d8060008114610605576040519150601f19603f3d011682016040523d82523d6000602084013e61060a565b606091505b509150915081801561063457508051158061063457508080602001905181019061063491906108a0565b6106655760405162461bcd60e51b8152602060048201526002602482015261534160f01b6044820152606401610126565b5050505050565b80356001600160a01b038116811461068357600080fd5b919050565b60008083601f84011261069a57600080fd5b50813567ffffffffffffffff8111156106b257600080fd5b6020830191508360208285010111156106ca57600080fd5b9250929050565b6000806000806000608086880312156106e957600080fd5b6106f28661066c565b94506107006020870161066c565b935060408601359250606086013567ffffffffffffffff81111561072357600080fd5b61072f88828901610688565b969995985093965092949392505050565b60008060006040848603121561075557600080fd5b61075e8461066c565b9250602084013567ffffffffffffffff81111561077a57600080fd5b61078686828701610688565b9497909650939450505050565b600080600080608085870312156107a957600080fd5b6107b28561066c565b93506107c06020860161066c565b93969395505050506040820135916060013590565b6020808252600990820152683737ba1037bbb732b960b91b604082015260600190565b8183823760009101908152919050565b6001600160a01b039687168152602081019590955260408501939093526060840191909152909216608082015260a081019190915260c00190565b60008060006060848603121561085857600080fd5b8351925060208401519150604084015190509250925092565b6000825160005b818110156108925760208186018101518583015201610878565b506000920191825250919050565b6000602082840312156108b257600080fd5b815180151581146108c257600080fd5b939250505056fea26469706673582212203460957e115c92462582410eb21130ddd167688788dd25e42bb742431533998b64736f6c63430008110033"
    constructor:
      abi: "constructor(address router, address weth9)"
      args:
        - "0x{ref:uniswap-v2.UniswapV2Router02}"
        - "0x{ref:weth9.WETH9}"


  # create USDT/WETH pool
  - # request 1,000,000 USDT as PoolLiquidityProvider from TokenFaucet
    action: "call"
    address: "0x{create:1}"
    amount: "0x{ether:10000}" # 10000 ETH
    call:
      abi: "function call(address addr, bytes calldata data)"
      args:
        - "0x{ref:token-faucet.TokenFaucet}"
        - abi: "function requestToken(address token, uint256 amount)"
          args:
            - "0x{ref:tether.TetherToken}"
            - "1000000000000" # 1000000 USDT
  - # provide liquidity for pool via PoolLiquidityProvider
    action: "call"
    address: "0x{create:1}"
    amount: "0x{ether:1000}" # 1000 ETH
    call:
      abi: "function provideLiquidity(address token0, address token1, uint256 amount0Desired, uint256 amount1Desired)"
      args:
        - "0x{ref:weth9.WETH9}"
        - "0x{ref:tether.TetherToken}"
        - "0x{ether:1000}" # 1000 ETH
        - "1000000000000" # 1000000 USDT

  
  # create USDC/WETH pool
  - # request 1,000,000 USDC as PoolLiquidityProvider from TokenFaucet
    action: "call"
    address: "0x{create:1}"
    amount: "0x{ether:10000}" # 10000 ETH
    call:
      abi: "function call(address addr, bytes calldata data)"
      args:
        - "0x{ref:token-faucet.TokenFaucet}"
        - abi: "function requestToken(address token, uint256 amount)"
          args:
            - "0x{ref:usdc.USDC}"
            - "1000000000000" # 1000000 USDC
  - # provide liquidity for pool via PoolLiquidityProvider
    action: "call"
    address: "0x{create:1}"
    amount: "0x{ether:1000}" # 1000 ETH
    call:
      abi: "function provideLiquidity(address token0, address token1, uint256 amount0Desired, uint256 amount1Desired)"
      args:
        - "0x{ref:weth9.WETH9}"
        - "0x{ref:usdc.USDC}"
        - "0x{ether:1000}" # 1000 ETH
        - "1000000000000" # 1000000 USDC

  

code-verify:
  "0xA2Ed4D0D86fE2709807A337F50D17b4F43c76b68": # PairLiquidityProvider
    input: "code-input-01.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "PairLiquidityProvider"
  "0x31827749B76c8c76540Ba967779EC2025A0fA4dc": # UniswapV2Pair
    code: "code-input-02.sol"
    compiler: "v0.5.16+commit.9c3226ce"
    optimize: 999999
    contract: "UniswapV2Pair"