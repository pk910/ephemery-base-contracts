
mode: "standalone"

exports:
  "DeploymentManager": "contract:0x0Ce74391a39B27A257448E55c2cfd9505104015e"

steps:
  - # fund keyless deployer address
    action: "call"
    if:
      - ["balance(0x4c8D290a1B368ac4728d83a9e8321fC3af2b39b1)", "<", 10000000000000000]
      - ["iscontract(0x7A0D94F55792C434d74a40883C6ed8545E406D12)", "==", false]
    address: "0x4c8D290a1B368ac4728d83a9e8321fC3af2b39b1"
    amount: 10000000000000000
    await: true
  - # create create2 factory from keyless deployer address (0x7A0D94F55792C434d74a40883C6ed8545E406D12)
    action: "publish"
    if:
      - ["iscontract(0x7A0D94F55792C434d74a40883C6ed8545E406D12)", "==", false]
    transaction: "0xf87e8085174876e800830186a08080ad601f80600e600039806000f350fe60003681823780368234f58015156014578182fd5b80825250506014600cf31ba02222222222222222222222222222222222222222222222222222222222222222a02222222222222222222222222222222222222222222222222222222222222222"
    await: true
  - # create DeploymentManagerInit via create2 factory (0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb)
    action: "call"
    if:
      - ["iscontract(0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb)", "==", false]
    address: "0x7A0D94F55792C434d74a40883C6ed8545E406D12"
    amount: 0
    data: "0x608060405234801561001057600080fd5b50604051610a39380380610a3983398101604081905261002f91610054565b600080546001600160a01b0319166001600160a01b0392909216919091179055610084565b60006020828403121561006657600080fd5b81516001600160a01b038116811461007d57600080fd5b9392505050565b6109a6806100936000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80638216f97c14610046578063f307052f1461005b578063fc9d99db1461008a575b600080fd5b61005961005436600461067b565b61009d565b005b61006e610069366004610718565b610257565b6040516001600160a01b03909116815260200160405180910390f35b61005961009836600461078c565b610375565b816001600160801b0316600154146100d05760405162461bcd60e51b81526004016100c7906107e9565b60405180910390fd5b600030838787876040516020016100eb959493929190610842565b60408051601f1981840301815291905280516020909101206000549091506001600160a01b031661012461011e83610475565b846104c8565b6001600160a01b03161461014a5760405162461bcd60e51b81526004016100c7906108a7565b6001805490600061015a836108e8565b90915550479050858110156101b15760405162461bcd60e51b815260206004820152601d60248201527f616d6f756e7420657863656564732077616c6c65742062616c616e636500000060448201526064016100c7565b6000876001600160a01b031687876040516101cc9190610901565b60006040518083038185875af1925050503d8060008114610209576040519150601f19603f3d011682016040523d82523d6000602084013e61020e565b606091505b505090508061024d5760405162461bcd60e51b815260206004820152600b60248201526a18d85b1b0819985a5b195960aa1b60448201526064016100c7565b5050505050505050565b6000826001600160801b0316600154146102835760405162461bcd60e51b81526004016100c7906107e9565b600030848660405160200161029a93929190610914565b60408051601f1981840301815291905280516020909101206000549091506001600160a01b03166102d36102cd83610475565b856104c8565b6001600160a01b0316146102f95760405162461bcd60e51b81526004016100c7906108a7565b60018054906000610309836108e8565b919050555060008551602087016000f09050803b61032657600080fd5b6001600160a01b03811661036c5760405162461bcd60e51b815260206004820152600d60248201526c18dc99585d194819985a5b1959609a1b60448201526064016100c7565b95945050505050565b816001600160801b03166001541461039f5760405162461bcd60e51b81526004016100c7906107e9565b604080513060601b6bffffffffffffffffffffffff1916602080830191909152651d323737b81d60d11b603483015260f086901b6001600160f01b031916603a830152608085901b6fffffffffffffffffffffffffffffffff1916603c8301528251602c818403018152604c90920190925280519101206000546001600160a01b031661042e61011e83610475565b6001600160a01b0316146104545760405162461bcd60e51b81526004016100c7906108a7565b8361ffff166001600082825461046a919061095d565b909155505050505050565b6040517f19457468657265756d205369676e6564204d6573736167653a0a3332000000006020820152603c8101829052600090605c01604051602081830303815290604052805190602001209050919050565b6000806000806104d785610548565b6040805160008152602081018083528b905260ff8316918101919091526060810184905260808101839052929550909350915060019060a0016020604051602081039080840390855afa158015610532573d6000803e3d6000fd5b5050506020604051035193505050505b92915050565b6000806000835160411461059e5760405162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e677468000000000000000060448201526064016100c7565b50505060208101516040820151606090920151909260009190911a90565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126105e357600080fd5b813567ffffffffffffffff808211156105fe576105fe6105bc565b604051601f8301601f19908116603f01168101908282118183101715610626576106266105bc565b8160405283815286602085880101111561063f57600080fd5b836020870160208301376000602085830101528094505050505092915050565b80356001600160801b038116811461067657600080fd5b919050565b600080600080600060a0868803121561069357600080fd5b85356001600160a01b03811681146106aa57600080fd5b945060208601359350604086013567ffffffffffffffff808211156106ce57600080fd5b6106da89838a016105d2565b94506106e86060890161065f565b935060808801359150808211156106fe57600080fd5b5061070b888289016105d2565b9150509295509295909350565b60008060006060848603121561072d57600080fd5b833567ffffffffffffffff8082111561074557600080fd5b610751878388016105d2565b945061075f6020870161065f565b9350604086013591508082111561077557600080fd5b50610782868287016105d2565b9150509250925092565b6000806000606084860312156107a157600080fd5b833561ffff811681146107b357600080fd5b92506107c16020850161065f565b9150604084013567ffffffffffffffff8111156107dd57600080fd5b610782868287016105d2565b6020808252600f908201526e0dcdedcc6ca40dad2e6e6dac2e8c6d608b1b604082015260600190565b6000815160005b818110156108335760208185018101518683015201610819565b50600093019283525090919050565b60006bffffffffffffffffffffffff19808860601b168352661d3231b0b6361d60c91b60148401526001600160801b03198760801b16601b840152808660601b16602b8401525083603f83015261089c605f830184610812565b979650505050505050565b602080825260119082015270696e76616c6964207369676e617475726560781b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b6000600182016108fa576108fa6108d2565b5060010190565b600061090d8284610812565b9392505050565b6bffffffffffffffffffffffff198460601b168152681d3231b932b0ba329d60b91b60148201526001600160801b03198360801b16601d820152600061036c602d830184610812565b80820180821115610542576105426108d256fea2646970667358221220de6c19db38dce0e95ee18c015cae4347e03b7a9bbb22af07eead48097085853e64736f6c63430008110033000000000000000000000000be3f73d5867365d38da69e1a90f2c4cf026100ff"
  - # create DeploymentManagerProxy via DeploymentManagerInit (0x0Ce74391a39B27A257448E55c2cfd9505104015e)
    action: "call"
    if:
      - ["iscontract(0x0Ce74391a39B27A257448E55c2cfd9505104015e)", "==", false]
    address: "0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb"
    amount: 0
    data: "0xf307052f00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000001ee608060405234801561001057600080fd5b50600180546001600160a01b031916331790556101bc806100326000396000f3fe60806040526004361061002d5760003560e01c80633659cfe6146100445780635c60da1b146100645761003c565b3661003c5761003a610090565b005b61003a610090565b34801561005057600080fd5b5061003a61005f366004610156565b6100f7565b34801561007057600080fd5b50600254604080516001600160a01b039092168252519081900360200190f35b6002546001600160a01b03166100e05760405162461bcd60e51b815260206004820152601160248201527037379034b6b83632b6b2b73a30ba34b7b760791b604482015260640160405180910390fd5b6002546100f5906001600160a01b0316610132565b565b6001546001600160a01b0316330361012757600280546001600160a01b0319166001600160a01b03831617905550565b61012f610090565b50565b3660008037600080366000845af43d6000803e808015610151573d6000f35b3d6000fd5b60006020828403121561016857600080fd5b81356001600160a01b038116811461017f57600080fd5b939250505056fea264697066735822122039f78bb081c5fdd7abcdbb4e617a3e165e7f0f47b44b2c5ecd175b75558476d164736f6c634300081100330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041198177033ef6625421cd1b7ef6036264face53da5da4d7f2948aef3edf7e3f955c8fcf4db887386224512af70a8bc50d678069359c4d208a496d3a47339c78101c00000000000000000000000000000000000000000000000000000000000000"


  ## deploy version 1
  - # create DeploymentAccountDelegate via create2 factory (0xd7Dc947cB361260e6bd157C9b7edA59f68499605)
    action: "call"
    if:
      - ["iscontract(0xd7Dc947cB361260e6bd157C9b7edA59f68499605)", "==", false]
    address: "0x7A0D94F55792C434d74a40883C6ed8545E406D12"
    amount: 0
    data: "0x608060405234801561001057600080fd5b50610a77806100206000396000f3fe6080604052600436106100865760003560e01c8063b2bdfa7b11610059578063b2bdfa7b1461011c578063cf5ba53f14610154578063d6d2b6ba14610167578063f0329f6b1461017a578063fe9840791461019a57600080fd5b806326e263d51461008b5780636dbf2fa0146100c957806397eab343146100de578063affed0e0146100fe575b600080fd5b34801561009757600080fd5b50600254600160801b90046001600160801b03165b6040516001600160801b0390911681526020015b60405180910390f35b6100dc6100d73660046107a8565b6101ad565b005b3480156100ea57600080fd5b506100dc6100f9366004610802565b610335565b34801561010a57600080fd5b506002546001600160801b03166100ac565b34801561012857600080fd5b5060005461013c906001600160a01b031681565b6040516001600160a01b0390911681526020016100c0565b61013c6101623660046108c9565b6103c3565b6100dc610175366004610906565b6104ef565b34801561018657600080fd5b5060015461013c906001600160a01b031681565b61013c6101a8366004610959565b610614565b6000546001600160a01b03163314806101d057506001546001600160a01b031633145b6101f55760405162461bcd60e51b81526004016101ec906109a0565b60405180910390fd5b60028054600160801b90046001600160801b0316906010610215836109e4565b91906101000a8154816001600160801b0302191690836001600160801b031602179055505060004790508381101561028f5760405162461bcd60e51b815260206004820152601d60248201527f616d6f756e7420657863656564732077616c6c65742062616c616e636500000060448201526064016101ec565b6000856001600160a01b03168585856040516102ac929190610a0a565b60006040518083038185875af1925050503d80600081146102e9576040519150601f19603f3d011682016040523d82523d6000602084013e6102ee565b606091505b505090508061032d5760405162461bcd60e51b815260206004820152600b60248201526a18d85b1b0819985a5b195960aa1b60448201526064016101ec565b505050505050565b6000546001600160a01b031633148061035857506001546001600160a01b031633145b6103745760405162461bcd60e51b81526004016101ec906109a0565b8061ffff16600260108282829054906101000a90046001600160801b031661039c9190610a1a565b92506101000a8154816001600160801b0302191690836001600160801b0316021790555050565b600080546001600160a01b03163314806103e757506001546001600160a01b031633145b6104035760405162461bcd60e51b81526004016101ec906109a0565b600280546001600160801b031690600061041c836109e4565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506002601081819054906101000a90046001600160801b031680929190610466906109e4565b91906101000a8154816001600160801b0302191690836001600160801b031602179055505060008251602084016000f09050803b6104a357600080fd5b6001600160a01b0381166104e95760405162461bcd60e51b815260206004820152600d60248201526c18dc99585d194819985a5b1959609a1b60448201526064016101ec565b92915050565b6000546001600160a01b031633148061051257506001546001600160a01b031633145b61052e5760405162461bcd60e51b81526004016101ec906109a0565b60028054600160801b90046001600160801b031690601061054e836109e4565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506000836001600160a01b0316838360405161058f929190610a0a565b600060405180830381855af49150503d80600081146105ca576040519150601f19603f3d011682016040523d82523d6000602084013e6105cf565b606091505b505090508061060e5760405162461bcd60e51b815260206004820152600b60248201526a18d85b1b0819985a5b195960aa1b60448201526064016101ec565b50505050565b600080546001600160a01b031633148061063857506001546001600160a01b031633145b6106545760405162461bcd60e51b81526004016101ec906109a0565b600280546001600160801b031690600061066d836109e4565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506002601081819054906101000a90046001600160801b0316809291906106b7906109e4565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506000838351602085016000f59050803b6106f557600080fd5b6001600160a01b03811661073c5760405162461bcd60e51b815260206004820152600e60248201526d18dc99585d194c8819985a5b195960921b60448201526064016101ec565b9392505050565b80356001600160a01b038116811461075a57600080fd5b919050565b60008083601f84011261077157600080fd5b50813567ffffffffffffffff81111561078957600080fd5b6020830191508360208285010111156107a157600080fd5b9250929050565b600080600080606085870312156107be57600080fd5b6107c785610743565b935060208501359250604085013567ffffffffffffffff8111156107ea57600080fd5b6107f68782880161075f565b95989497509550505050565b60006020828403121561081457600080fd5b813561ffff8116811461073c57600080fd5b634e487b7160e01b600052604160045260246000fd5b600082601f83011261084d57600080fd5b813567ffffffffffffffff8082111561086857610868610826565b604051601f8301601f19908116603f0116810190828211818310171561089057610890610826565b816040528381528660208588010111156108a957600080fd5b836020870160208301376000602085830101528094505050505092915050565b6000602082840312156108db57600080fd5b813567ffffffffffffffff8111156108f257600080fd5b6108fe8482850161083c565b949350505050565b60008060006040848603121561091b57600080fd5b61092484610743565b9250602084013567ffffffffffffffff81111561094057600080fd5b61094c8682870161075f565b9497909650939450505050565b6000806040838503121561096c57600080fd5b82359150602083013567ffffffffffffffff81111561098a57600080fd5b6109968582860161083c565b9150509250929050565b6020808252601490820152733737ba1037bbb732b91037b91036b0b730b3b2b960611b604082015260600190565b634e487b7160e01b600052601160045260246000fd5b60006001600160801b03808316818103610a0057610a006109ce565b6001019392505050565b8183823760009101908152919050565b6001600160801b03818116838216019080821115610a3a57610a3a6109ce565b509291505056fea26469706673582212207dab33e1ea36a42b691917c9b8b84380df337e591fcfddd47d51c44c854249b464736f6c63430008110033"

  - # create DeploymentManager implementation (0xbD18e07dA37865CD93D3448bb3cdD9d15B3D4d79)
    action: "call"
    if:
      - ["iscontract(0xbD18e07dA37865CD93D3448bb3cdD9d15B3D4d79)", "==", false]
    address: "0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb"
    amount: 0
    data: "0xf307052f0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000027000000000000000000000000000000000000000000000000000000000000002674608060405234801561001057600080fd5b50612654806100206000396000f3fe6080604052600436106200015b5760003560e01c8063a124be8b11620000c5578063c19805b91162000078578063c19805b914620003b2578063ca07148414620003d7578063dacc14d914620003fc578063e757b0cd1462000413578063eb2e493d146200042a578063fd7230d6146200044f57600080fd5b8063a124be8b14620002f0578063ad8253ae1462000315578063b058bbe0146200033a578063b1d154fc146200035f578063b2e4186d1462000376578063bd1d42d6146200038d57600080fd5b8063594420fb116200011e578063594420fb146200022a5780635ae811c61462000253578063683d4b841462000278578063760ee0c6146200029d57806377cae75814620002c257806386d6634114620002d957600080fd5b806322de4d4614620001605780633a3db4bb1462000187578063528fbe8f14620001bf57806354fd4d5014620001ef578063553a73291462000205575b600080fd5b3480156200016d57600080fd5b50620001856200017f3660046200164f565b62000466565b005b3480156200019457600080fd5b50620001ac620001a6366004620016aa565b620004db565b6040519081526020015b60405180910390f35b620001d6620001d0366004620017ac565b6200056a565b6040516001600160a01b039091168152602001620001b6565b348015620001fc57600080fd5b506001620001ac565b3480156200021257600080fd5b50620001d6620002243660046200184b565b620006f9565b3480156200023757600080fd5b5073d7dc947cb361260e6bd157c9b7eda59f68499605620001d6565b3480156200026057600080fd5b5062000185620002723660046200187a565b6200070e565b3480156200028557600080fd5b50620001ac62000297366004620018f3565b62000879565b348015620002aa57600080fd5b50620001d6620002bc3660046200184b565b620008b9565b62000185620002d3366004620019c8565b62000907565b62000185620002ea36600462001a37565b62000966565b348015620002fd57600080fd5b50620001d66200030f3660046200184b565b62000ad7565b3480156200032257600080fd5b50620001ac6200033436600462001af4565b62000bc3565b3480156200034757600080fd5b50620001d66200035936600462001b86565b62000c06565b620001856200037036600462001bee565b62000c60565b620001d66200038736600462001c4f565b62000cde565b3480156200039a57600080fd5b50620001ac620003ac36600462001ca2565b62000d6f565b348015620003bf57600080fd5b5062000185620003d136600462001cf2565b62000d8e565b348015620003e457600080fd5b50620001ac620003f636600462001d0c565b62000dd4565b620001d66200040d36600462001d74565b62000df1565b620001856200042436600462001e1b565b62000f74565b3480156200043757600080fd5b50620001d66200044936600462001e78565b620010e1565b620001d66200046036600462001eb0565b62001321565b6000620004743384620013af565b6040516397eab34360e01b815261ffff841660048201529091506001600160a01b038216906397eab34390602401600060405180830381600087803b158015620004bd57600080fd5b505af1158015620004d2573d6000803e3d6000fd5b50505050505050565b6040516001600160601b031930606090811b82166020840152641d3737b81d60d91b603484015286901b166039820152604d81018490526001600160f01b031960f084901b16606d8201526fffffffffffffffffffffffffffffffff19608083901b16606f820152600090607f015b604051602081830303815290604052805190602001209050949350505050565b6000806200057b8787878762000dd4565b9050866001600160a01b03166200059d620005968362001493565b85620014e6565b6001600160a01b031614620005cf5760405162461bcd60e51b8152600401620005c69062001efa565b60405180910390fd5b6000620005dd8888620013af565b9050846001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000628573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906200064e919062001f25565b6001600160801b031614620006775760405162461bcd60e51b8152600401620005c69062001f45565b60405163cf5ba53f60e01b81526001600160a01b0382169063cf5ba53f903490620006a7908a9060040162001fc2565b60206040518083038185885af1158015620006c6573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190620006ed919062001fd7565b98975050505050505050565b6000620007078383620013af565b9392505050565b60006200071e86868686620004db565b9050856001600160a01b031662000740620007398362001493565b84620014e6565b6001600160a01b031614620007695760405162461bcd60e51b8152600401620005c69062001efa565b6000620007778787620013af565b9050836001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa158015620007c2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620007e8919062001f25565b6001600160801b031614620008115760405162461bcd60e51b8152600401620005c69062001f45565b6040516397eab34360e01b815261ffff861660048201526001600160a01b038216906397eab34390602401600060405180830381600087803b1580156200085757600080fd5b505af11580156200086c573d6000803e3d6000fd5b5050505050505050505050565b6000308686848787604051602001620008989695949392919062001ff7565b60405160208183030381529060405280519060200120905095945050505050565b6000808383604051602001620008d192919062002074565b60408051808303601f190181529181528151602092830120600090815260039092529020546001600160a01b0316949350505050565b6000620009153387620013af565b9050806001600160a01b0316636dbf2fa034878787876040518663ffffffff1660e01b81526004016200094c9493929190620020ba565b6000604051808303818588803b1580156200085757600080fd5b60006200097888888888888862000bc3565b9050876001600160a01b031662000993620007398362001493565b6001600160a01b031614620009bc5760405162461bcd60e51b8152600401620005c69062001efa565b6000620009ca8989620013af565b9050836001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000a15573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000a3b919062001f25565b6001600160801b03161462000a645760405162461bcd60e51b8152600401620005c69062001f45565b60405163036df97d60e51b81526001600160a01b03821690636dbf2fa090349062000a98908b908b908b90600401620020ee565b6000604051808303818588803b15801562000ab257600080fd5b505af115801562000ac7573d6000803e3d6000fd5b5050505050505050505050505050565b600080838360405160200162000aef92919062002074565b60405160208183030381529060405280519060200120905060006040518060200162000b1b9062001629565b601f1982820381018352601f9091011660408181526001600160a01b03881660208301529192506000916001600160f81b0319913091869186910160408051601f198184030181529082905262000b76929160200162002117565b6040516020818303038152906040528051906020012060405160200162000ba194939291906200214a565b60408051808303601f1901815291905280516020909101209695505050505050565b60003087878488888860405160200162000be497969594939291906200217e565b6040516020818303038152906040528051906020012090509695505050505050565b60008062000c15868662000ad7565b9050600060ff60f81b8286868051906020012060405160200162000c3d94939291906200214a565b60408051808303601f190181529190528051602090910120979650505050505050565b600062000c6e3386620013af565b9050806001600160a01b031663d6d2b6ba348686866040518563ffffffff1660e01b815260040162000ca393929190620021fe565b6000604051808303818588803b15801562000cbd57600080fd5b505af115801562000cd2573d6000803e3d6000fd5b50505050505050505050565b60008062000ced3386620013af565b9050806001600160a01b031663fe9840793486866040518463ffffffff1660e01b815260040162000d2092919062002225565b60206040518083038185885af115801562000d3f573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062000d66919062001fd7565b95945050505050565b6000308686848787604051602001620008989695949392919062002240565b806001101562000dd15760405162461bcd60e51b815260206004820152600d60248201526c3b32b939b4b7b7103637bbb2b960991b6044820152606401620005c6565b50565b600030858584866040516020016200054a959493929190620022b7565b60008062000e03888888888862000d6f565b9050876001600160a01b031662000e1e620005968362001493565b6001600160a01b03161462000e475760405162461bcd60e51b8152600401620005c69062001efa565b600062000e558989620013af565b9050846001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa15801562000ea0573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000ec6919062001f25565b6001600160801b03161462000eef5760405162461bcd60e51b8152600401620005c69062001f45565b60405163fe98407960e01b81526001600160a01b0382169063fe98407990349062000f21908b908b9060040162002225565b60206040518083038185885af115801562000f40573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019062000f67919062001fd7565b9998505050505050505050565b600062000f85878787878762000879565b9050866001600160a01b031662000fa0620007398362001493565b6001600160a01b03161462000fc95760405162461bcd60e51b8152600401620005c69062001efa565b600062000fd78888620013af565b9050836001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa15801562001022573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062001048919062001f25565b6001600160801b031614620010715760405162461bcd60e51b8152600401620005c69062001f45565b604051636b695b5d60e11b81526001600160a01b0382169063d6d2b6ba903490620010a3908a908a9060040162002326565b6000604051808303818588803b158015620010bd57600080fd5b505af1158015620010d2573d6000803e3d6000fd5b50505050505050505050505050565b600080620010f0858562000ad7565b90506060836000036200114d57604051606b60f91b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152600160ff1b60368201526037015b604051602081830303815290604052905062001310565b607f84116200119e57604051606b60f91b6020820152602560fa1b60218201526001600160601b0319606084901b16602282015260f885901b6001600160f81b031916603682015260370162001136565b60ff8411620011f95760405160d760f81b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152608160f81b603682015260f885901b6001600160f81b031916603782015260380162001136565b61ffff84116200125557604051601b60fb1b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152604160f91b60368201526001600160f01b031960f086901b16603782015260390162001136565b62ffffff8411620012b25760405160d960f81b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152608360f81b60368201526001600160e81b031960e886901b166037820152603a0162001136565b604051606d60f91b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152602160fa1b60368201526001600160e01b031960e086901b166037820152603b0160405160208183030381529060405290505b805160209091012095945050505050565b600080620013303385620013af565b9050806001600160a01b031663cf5ba53f34856040518363ffffffff1660e01b815260040162001361919062001fc2565b60206040518083038185885af115801562001380573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190620013a7919062001fd7565b949350505050565b6000808383604051602001620013c792919062002074565b60408051601f198184030181529181528151602092830120600081815260039093529120549091506001600160a01b031680620013a7576200140a858362001568565b90506001600160a01b038116620014645760405162461bcd60e51b815260206004820152601960248201527f636f756c64206e6f7420637265617465206465706c6f796572000000000000006044820152606401620005c6565b600082815260036020526040902080546001600160a01b0319166001600160a01b038316179055949350505050565b6040517f19457468657265756d205369676e6564204d6573736167653a0a3332000000006020820152603c8101829052600090605c01604051602081830303815290604052805190602001209050919050565b600080600080620014f785620015b3565b6040805160008152602081018083528b905260ff8316918101919091526060810184905260808101839052929550909350915060019060a0016020604051602081039080840390855afa15801562001553573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b600081836040516200157a9062001629565b6001600160a01b0390911681526020018190604051809103906000f5905080158015620015ab573d6000803e3d6000fd5b509392505050565b600080600083516041146200160b5760405162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606401620005c6565b50505060208101516040820151606090920151909260009190911a90565b6102d2806200234d83390190565b803561ffff811681146200164a57600080fd5b919050565b600080604083850312156200166357600080fd5b82359150620016756020840162001637565b90509250929050565b6001600160a01b038116811462000dd157600080fd5b6001600160801b038116811462000dd157600080fd5b60008060008060808587031215620016c157600080fd5b8435620016ce816200167e565b935060208501359250620016e56040860162001637565b91506060850135620016f78162001694565b939692955090935050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200172a57600080fd5b81356001600160401b038082111562001747576200174762001702565b604051601f8301601f19908116603f0116810190828211818310171562001772576200177262001702565b816040528381528660208588010111156200178c57600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600080600060a08688031215620017c557600080fd5b8535620017d2816200167e565b94506020860135935060408601356001600160401b0380821115620017f657600080fd5b6200180489838a0162001718565b945060608801359150620018188262001694565b909250608087013590808211156200182f57600080fd5b506200183e8882890162001718565b9150509295509295909350565b600080604083850312156200185f57600080fd5b82356200186c816200167e565b946020939093013593505050565b600080600080600060a086880312156200189357600080fd5b8535620018a0816200167e565b945060208601359350620018b76040870162001637565b92506060860135620018c98162001694565b915060808601356001600160401b03811115620018e557600080fd5b6200183e8882890162001718565b600080600080600060a086880312156200190c57600080fd5b853562001919816200167e565b945060208601359350604086013562001932816200167e565b925060608601356001600160401b038111156200194e57600080fd5b6200195c8882890162001718565b92505060808601356200196f8162001694565b809150509295509295909350565b60008083601f8401126200199057600080fd5b5081356001600160401b03811115620019a857600080fd5b602083019150836020828501011115620019c157600080fd5b9250929050565b600080600080600060808688031215620019e157600080fd5b853594506020860135620019f5816200167e565b93506040860135925060608601356001600160401b0381111562001a1857600080fd5b62001a26888289016200197d565b969995985093965092949392505050565b600080600080600080600060e0888a03121562001a5357600080fd5b873562001a60816200167e565b965060208801359550604088013562001a79816200167e565b94506060880135935060808801356001600160401b038082111562001a9d57600080fd5b62001aab8b838c0162001718565b945060a08a0135915062001abf8262001694565b90925060c0890135908082111562001ad657600080fd5b5062001ae58a828b0162001718565b91505092959891949750929550565b60008060008060008060c0878903121562001b0e57600080fd5b863562001b1b816200167e565b955060208701359450604087013562001b34816200167e565b93506060870135925060808701356001600160401b0381111562001b5757600080fd5b62001b6589828a0162001718565b92505060a087013562001b788162001694565b809150509295509295509295565b6000806000806080858703121562001b9d57600080fd5b843562001baa816200167e565b9350602085013592506040850135915060608501356001600160401b0381111562001bd457600080fd5b62001be28782880162001718565b91505092959194509250565b6000806000806060858703121562001c0557600080fd5b84359350602085013562001c19816200167e565b925060408501356001600160401b0381111562001c3557600080fd5b62001c43878288016200197d565b95989497509550505050565b60008060006060848603121562001c6557600080fd5b833592506020840135915060408401356001600160401b0381111562001c8a57600080fd5b62001c988682870162001718565b9150509250925092565b600080600080600060a0868803121562001cbb57600080fd5b853562001cc8816200167e565b9450602086013593506040860135925060608601356001600160401b038111156200194e57600080fd5b60006020828403121562001d0557600080fd5b5035919050565b6000806000806080858703121562001d2357600080fd5b843562001d30816200167e565b93506020850135925060408501356001600160401b0381111562001d5357600080fd5b62001d618782880162001718565b9250506060850135620016f78162001694565b60008060008060008060c0878903121562001d8e57600080fd5b863562001d9b816200167e565b9550602087013594506040870135935060608701356001600160401b038082111562001dc657600080fd5b62001dd48a838b0162001718565b94506080890135915062001de88262001694565b90925060a0880135908082111562001dff57600080fd5b5062001e0e89828a0162001718565b9150509295509295509295565b60008060008060008060c0878903121562001e3557600080fd5b863562001e42816200167e565b955060208701359450604087013562001e5b816200167e565b935060608701356001600160401b038082111562001dc657600080fd5b60008060006060848603121562001e8e57600080fd5b833562001e9b816200167e565b95602085013595506040909401359392505050565b6000806040838503121562001ec457600080fd5b8235915060208301356001600160401b0381111562001ee257600080fd5b62001ef08582860162001718565b9150509250929050565b602080825260119082015270696e76616c6964207369676e617475726560781b604082015260600190565b60006020828403121562001f3857600080fd5b8151620007078162001694565b6020808252600f908201526e0dcdedcc6ca40dad2e6e6dac2e8c6d608b1b604082015260600190565b60005b8381101562001f8b57818101518382015260200162001f71565b50506000910152565b6000815180845262001fae81602086016020860162001f6e565b601f01601f19169290920160200192915050565b60208152600062000707602083018462001f94565b60006020828403121562001fea57600080fd5b815162000707816200167e565b60006001600160601b0319808960601b168352691d3232b632b3b0ba329d60b11b6014840152808860601b16601e8401528660328401526001600160801b03198660801b166052840152808560601b1660628401525082516200206281607685016020870162001f6e565b91909101607601979650505050505050565b60609290921b6001600160601b0319168252601482015260340190565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60018060a01b0385168152836020820152606060408201526000620020e460608301848662002091565b9695505050505050565b60018060a01b038416815282602082015260606040820152600062000d66606083018462001f94565b600083516200212b81846020880162001f6e565b8351908301906200214181836020880162001f6e565b01949350505050565b6001600160f81b031994909416845260609290921b6001600160601b03191660018401526015830152603582015260550190565b60006001600160601b0319808a60601b168352651d31b0b6361d60d11b6014840152808960601b16601a84015287602e8401526001600160801b03198760801b16604e840152808660601b16605e840152508360728301528251620021eb81609285016020870162001f6e565b9190910160920198975050505050505050565b6001600160a01b038416815260406020820181905260009062000d66908301848662002091565b828152604060208201526000620013a7604083018462001f94565b60006001600160601b0319808960601b168352681d31b932b0ba32991d60b91b6014840152808860601b16601d840152508560318301526001600160801b03198560801b1660518301528360618301528251620022a581608185016020870162001f6e565b91909101608101979650505050505050565b60006001600160601b0319808860601b168352671d31b932b0ba329d60c11b6014840152808760601b16601c840152508460308301526001600160801b03198460801b16605083015282516200231581606085016020870162001f6e565b919091016060019695505050505050565b6001600160a01b0383168152604060208201819052600090620013a79083018462001f9456fe608060405234801561001057600080fd5b506040516102d23803806102d283398101604081905261002f91610070565b600080546001600160a01b039092166001600160a01b03199283161790556001805490911633178155600280546001600160801b03191690911790556100a0565b60006020828403121561008257600080fd5b81516001600160a01b038116811461009957600080fd5b9392505050565b610223806100af6000396000f3fe6080604052600436106100385760003560e01c80635c60da1b1461004f578063b2bdfa7b14610080578063f0329f6b146100a057610047565b36610047576100456100c0565b005b6100456100c0565b34801561005b57600080fd5b50610064610126565b6040516001600160a01b03909116815260200160405180910390f35b34801561008c57600080fd5b50600054610064906001600160a01b031681565b3480156100ac57600080fd5b50600154610064906001600160a01b031681565b60006100ca610126565b90506001600160a01b03811661011a5760405162461bcd60e51b815260206004820152601160248201527037379034b6b83632b6b2b73a30ba34b7b760791b604482015260640160405180910390fd5b61012381610199565b50565b6001546040805163594420fb60e01b815290516000926001600160a01b03169163594420fb9160048083019260209291908290030181865afa158015610170573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061019491906101bd565b905090565b3660008037600080366000845af43d6000803e8080156101b8573d6000f35b3d6000fd5b6000602082840312156101cf57600080fd5b81516001600160a01b03811681146101e657600080fd5b939250505056fea2646970667358221220ddd011277af191480f5b5fc191917f03daafd7eac98ed338d9b5ef66b1381fb264736f6c63430008110033a264697066735822122001d1f04207398714fe4cdabe5a8f6b79a647f2b062374e79b2a160f11628af3b64736f6c634300081100330000000000000000000000000000000000000000000000000000000000000000000000000000000000000041f8306b8b64d485157a52f1e5d01c13e765baf80905ea01d794af5bd069d445cf723f3ae56f9f73760c5a8827e528f9451e595c4bffeebdec147a5c8259f7ba391b00000000000000000000000000000000000000000000000000000000000000"
  - # upgrade DeploymentManagerProxy to implementation
    action: "call"
    if:
      - ["iscontract(0xbD18e07dA37865CD93D3448bb3cdD9d15B3D4d79)", "==", false] # TODO: improve this condition via static-call to version()
    address: "0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb"
    amount: 0
    data: "0x8216f97c0000000000000000000000000ce74391a39b27a257448e55c2cfd9505104015e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000243659cfe6000000000000000000000000bd18e07da37865cd93d3448bb3cdd9d15b3d4d79000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041258b6444ae3964b09527c71c4ec259d1118a40d589ac36394712cf6aab5d7e0c78a309a27c47ff88df5e22599849470228b8ccf171ec7f5a5ca1497a854cd3491b00000000000000000000000000000000000000000000000000000000000000"

  - # create a deployment account (for code verification)
    action: "call"
    if:
      - ["iscontract(0xf0E58d34224Eb032d71929C33df74eD075e8e646)", "==", false]
    address: "0x0Ce74391a39B27A257448E55c2cfd9505104015e"
    amount: 0
    data: "0x553a732900000000000000000000000049e0fd3800c117357057534e30c5b5115c6734880000000000000000000000000000000000000000000000000000000000000001"


code-verify:
  "0xF5783a369C581e56A8FCB54e1e8BEcA9911ADcDb": # DeploymentManagerInit
    input: "code-input-01.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "DeploymentManagerInit"
  "0x0Ce74391a39B27A257448E55c2cfd9505104015e": # DeploymentManagerProxy
    input: "code-input-02.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "DeploymentManagerProxy"
  "0xd7Dc947cB361260e6bd157C9b7edA59f68499605": # DeploymentAccountDelegate
    input: "code-input-03.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "DeploymentAccountDelegate"
  "0xbD18e07dA37865CD93D3448bb3cdD9d15B3D4d79": # DeploymentManager
    input: "code-input-04.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "DeploymentManager"
  "0xf0E58d34224Eb032d71929C33df74eD075e8e646": # DeploymentAccount
    input: "code-input-05.json"
    compiler: "v0.8.17+commit.8df45f5f"
    contract: "DeploymentAccount"


