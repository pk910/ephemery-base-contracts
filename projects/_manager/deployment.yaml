
mode: "standalone"

exports:
  "Create2Factory": "contract:0x7A0D94F55792C434d74a40883C6ed8545E406D12"
  "DeploymentManager": "contract:0xdb0E6Ab55cCF5C404628e4F0662AFb0b82AC407b"

steps:
  - # fund keyless deployer address
    action: "call"
    if:
      - ["balance(0x4c8D290a1B368ac4728d83a9e8321fC3af2b39b1)", "<", 10000000000000000]
      - ["iscontract(0x7A0D94F55792C434d74a40883C6ed8545E406D12)", "==", false]
    address: "0x4c8D290a1B368ac4728d83a9e8321fC3af2b39b1"
    amount: 10000000000000000
    await: true
  - # create create2 factory from keyless deployer address (0x7A0D94F55792C434d74a40883C6ed8545E406D12)
    action: "publish"
    if:
      - ["iscontract(0x7A0D94F55792C434d74a40883C6ed8545E406D12)", "==", false]
    transaction: "0xf87e8085174876e800830186a08080ad601f80600e600039806000f350fe60003681823780368234f58015156014578182fd5b80825250506014600cf31ba02222222222222222222222222222222222222222222222222222222222222222a02222222222222222222222222222222222222222222222222222222222222222"
    await: true
  - # create DeploymentManager via create2 factory (0x7A0D94F55792C434d74a40883C6ed8545E406D12)
    action: "call"
    if:
      - ["iscontract(0xdb0E6Ab55cCF5C404628e4F0662AFb0b82AC407b)", "==", false]
    address: "0x7A0D94F55792C434d74a40883C6ed8545E406D12"
    amount: 0
    data: "0x608060405234801561001057600080fd5b506120b6806100206000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c8063b058bbe01161008c578063ca07148411610066578063ca071484146101da578063dacc14d9146101ed578063eb2e493d14610200578063fd7230d61461021357600080fd5b8063b058bbe0146101a1578063b2e4186d146101b4578063bd1d42d6146101c757600080fd5b806377cae758116100c857806377cae7581461014557806386d663411461015a578063a124be8b1461016d578063ad8253ae1461018057600080fd5b8063528fbe8f146100ef578063553a73291461011f578063760ee0c614610132575b600080fd5b6101026100fd366004610fc3565b610226565b6040516001600160a01b0390911681526020015b60405180910390f35b61010261012d366004611058565b61039d565b610102610140366004611058565b6103b0565b610158610153366004611084565b6103fb565b005b61015861016836600461111a565b610476565b61010261017b366004611058565b6105d7565b61019361018e3660046111cb565b6106bb565b604051908152602001610116565b6101026101af366004611254565b6106fc565b6101026101c23660046112b7565b610752565b6101936101d5366004611307565b6107dc565b6101936101e836600461137f565b61081a565b6101026101fb3660046113eb565b610855565b61010261020e366004611488565b6109c1565b6101026102213660046114bd565b610bf5565b6000806102358787878761081a565b9050866001600160a01b031661025361024d83610c7c565b85610ccf565b6001600160a01b0316146102825760405162461bcd60e51b815260040161027990611504565b60405180910390fd5b600061028e8888610d4e565b9050846001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa1580156102d8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102fc919061152f565b6001600160801b0316146103225760405162461bcd60e51b81526004016102799061154c565b60405163cf5ba53f60e01b81526001600160a01b0382169063cf5ba53f9061034e9089906004016115c5565b6020604051808303816000875af115801561036d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039191906115d8565b98975050505050505050565b60006103a98383610d4e565b9392505050565b60008083836040516020016103c69291906115f5565b60408051808303601f1901815291815281516020928301206000908152918290529020546001600160a01b0316949350505050565b60006104073387610d4e565b60405163036df97d60e51b81529091506001600160a01b03821690636dbf2fa09061043c908890889088908890600401611612565b600060405180830381600087803b15801561045657600080fd5b505af115801561046a573d6000803e3d6000fd5b50505050505050505050565b60006104868888888888886106bb565b9050876001600160a01b03166104a461049e83610c7c565b84610ccf565b6001600160a01b0316146104ca5760405162461bcd60e51b815260040161027990611504565b60006104d68989610d4e565b9050836001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa158015610520573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610544919061152f565b6001600160801b03161461056a5760405162461bcd60e51b81526004016102799061154c565b60405163036df97d60e51b81526001600160a01b03821690636dbf2fa09061059a908a908a908a9060040161165a565b600060405180830381600087803b1580156105b457600080fd5b505af11580156105c8573d6000803e3d6000fd5b50505050505050505050505050565b60008083836040516020016105ed9291906115f5565b60405160208183030381529060405280519060200120905060006040518060200161061790610ee6565b601f1982820381018352601f9091011660408181526001600160a01b03881660208301529192506000916001600160f81b0319913091869186910160408051601f19818403018152908290526106709291602001611681565b6040516020818303038152906040528051906020012060405160200161069994939291906116b0565b60408051808303601f1901815291905280516020909101209695505050505050565b6000308787848888886040516020016106da97969594939291906116e4565b6040516020818303038152906040528051906020012090509695505050505050565b60008061070986866105d7565b9050600060ff60f81b8286868051906020012060405160200161072f94939291906116b0565b60408051808303601f190181529190528051602090910120979650505050505050565b60008061075f3386610d4e565b60405163fe98407960e01b81529091506001600160a01b0382169063fe984079906107909087908790600401611762565b6020604051808303816000875af11580156107af573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107d391906115d8565b95945050505050565b60003086868487876040516020016107f99695949392919061177b565b60405160208183030381529060405280519060200120905095945050505050565b600030858584866040516020016108359594939291906117f0565b604051602081830303815290604052805190602001209050949350505050565b60008061086588888888886107dc565b9050876001600160a01b031661087d61024d83610c7c565b6001600160a01b0316146108a35760405162461bcd60e51b815260040161027990611504565b60006108af8989610d4e565b9050846001600160801b0316816001600160a01b03166326e263d56040518163ffffffff1660e01b8152600401602060405180830381865afa1580156108f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061091d919061152f565b6001600160801b0316146109435760405162461bcd60e51b81526004016102799061154c565b60405163fe98407960e01b81526001600160a01b0382169063fe98407990610971908a908a90600401611762565b6020604051808303816000875af1158015610990573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109b491906115d8565b9998505050505050505050565b6000806109ce85856105d7565b9050606083600003610a2957604051606b60f91b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152600160ff1b60368201526037015b6040516020818303038152906040529050610be4565b607f8411610a7857604051606b60f91b6020820152602560fa1b60218201526001600160601b0319606084901b16602282015260f885901b6001600160f81b0319166036820152603701610a13565b60ff8411610ad15760405160d760f81b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152608160f81b603682015260f885901b6001600160f81b0319166037820152603801610a13565b61ffff8411610b2b57604051601b60fb1b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152604160f91b60368201526001600160f01b031960f086901b166037820152603901610a13565b62ffffff8411610b865760405160d960f81b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152608360f81b60368201526001600160e81b031960e886901b166037820152603a01610a13565b604051606d60f91b6020820152602560fa1b60218201526001600160601b0319606084901b166022820152602160fa1b60368201526001600160e01b031960e086901b166037820152603b0160405160208183030381529060405290505b805160209091012095945050505050565b600080610c023385610d4e565b60405163cf5ba53f60e01b81529091506001600160a01b0382169063cf5ba53f90610c319086906004016115c5565b6020604051808303816000875af1158015610c50573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c7491906115d8565b949350505050565b6040517f19457468657265756d205369676e6564204d6573736167653a0a3332000000006020820152603c8101829052600090605c01604051602081830303815290604052805190602001209050919050565b600080600080610cde85610e2a565b6040805160008152602081018083528b905260ff8316918101919091526060810184905260808101839052929550909350915060019060a0016020604051602081039080840390855afa158015610d39573d6000803e3d6000fd5b5050604051601f190151979650505050505050565b6000808383604051602001610d649291906115f5565b60408051601f1981840301815291815281516020928301206000818152928390529120549091506001600160a01b031680610c7457610da38583610e9e565b90506001600160a01b038116610dfb5760405162461bcd60e51b815260206004820152601960248201527f636f756c64206e6f7420637265617465206465706c6f796572000000000000006044820152606401610279565b600082815260208190526040902080546001600160a01b0319166001600160a01b038316179055949350505050565b60008060008351604114610e805760405162461bcd60e51b815260206004820152601860248201527f696e76616c6964207369676e6174757265206c656e67746800000000000000006044820152606401610279565b50505060208101516040820151606090920151909260009190911a90565b60008183604051610eae90610ee6565b6001600160a01b0390911681526020018190604051809103906000f5905080158015610ede573d6000803e3d6000fd5b509392505050565b6108238061185e83390190565b6001600160a01b0381168114610f0857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b600082601f830112610f3257600080fd5b813567ffffffffffffffff80821115610f4d57610f4d610f0b565b604051601f8301601f19908116603f01168101908282118183101715610f7557610f75610f0b565b81604052838152866020858801011115610f8e57600080fd5b836020870160208301376000602085830101528094505050505092915050565b6001600160801b0381168114610f0857600080fd5b600080600080600060a08688031215610fdb57600080fd5b8535610fe681610ef3565b945060208601359350604086013567ffffffffffffffff8082111561100a57600080fd5b61101689838a01610f21565b94506060880135915061102882610fae565b9092506080870135908082111561103e57600080fd5b5061104b88828901610f21565b9150509295509295909350565b6000806040838503121561106b57600080fd5b823561107681610ef3565b946020939093013593505050565b60008060008060006080868803121561109c57600080fd5b8535945060208601356110ae81610ef3565b935060408601359250606086013567ffffffffffffffff808211156110d257600080fd5b818801915088601f8301126110e657600080fd5b8135818111156110f557600080fd5b89602082850101111561110757600080fd5b9699959850939650602001949392505050565b600080600080600080600060e0888a03121561113557600080fd5b873561114081610ef3565b965060208801359550604088013561115781610ef3565b945060608801359350608088013567ffffffffffffffff8082111561117b57600080fd5b6111878b838c01610f21565b945060a08a0135915061119982610fae565b90925060c089013590808211156111af57600080fd5b506111bc8a828b01610f21565b91505092959891949750929550565b60008060008060008060c087890312156111e457600080fd5b86356111ef81610ef3565b955060208701359450604087013561120681610ef3565b935060608701359250608087013567ffffffffffffffff81111561122957600080fd5b61123589828a01610f21565b92505060a087013561124681610fae565b809150509295509295509295565b6000806000806080858703121561126a57600080fd5b843561127581610ef3565b93506020850135925060408501359150606085013567ffffffffffffffff81111561129f57600080fd5b6112ab87828801610f21565b91505092959194509250565b6000806000606084860312156112cc57600080fd5b8335925060208401359150604084013567ffffffffffffffff8111156112f157600080fd5b6112fd86828701610f21565b9150509250925092565b600080600080600060a0868803121561131f57600080fd5b853561132a81610ef3565b94506020860135935060408601359250606086013567ffffffffffffffff81111561135457600080fd5b61136088828901610f21565b925050608086013561137181610fae565b809150509295509295909350565b6000806000806080858703121561139557600080fd5b84356113a081610ef3565b935060208501359250604085013567ffffffffffffffff8111156113c357600080fd5b6113cf87828801610f21565b92505060608501356113e081610fae565b939692955090935050565b60008060008060008060c0878903121561140457600080fd5b863561140f81610ef3565b95506020870135945060408701359350606087013567ffffffffffffffff8082111561143a57600080fd5b6114468a838b01610f21565b94506080890135915061145882610fae565b90925060a0880135908082111561146e57600080fd5b5061147b89828a01610f21565b9150509295509295509295565b60008060006060848603121561149d57600080fd5b83356114a881610ef3565b95602085013595506040909401359392505050565b600080604083850312156114d057600080fd5b82359150602083013567ffffffffffffffff8111156114ee57600080fd5b6114fa85828601610f21565b9150509250929050565b602080825260119082015270696e76616c6964207369676e617475726560781b604082015260600190565b60006020828403121561154157600080fd5b81516103a981610fae565b6020808252600f908201526e0dcdedcc6ca40dad2e6e6dac2e8c6d608b1b604082015260600190565b60005b83811015611590578181015183820152602001611578565b50506000910152565b600081518084526115b1816020860160208601611575565b601f01601f19169290920160200192915050565b6020815260006103a96020830184611599565b6000602082840312156115ea57600080fd5b81516103a981610ef3565b60609290921b6001600160601b0319168252601482015260340190565b6001600160a01b0385168152602081018490526060604082018190528101829052818360808301376000818301608090810191909152601f909201601f191601019392505050565b60018060a01b03841681528260208201526060604082015260006107d36060830184611599565b60008351611693818460208801611575565b8351908301906116a7818360208801611575565b01949350505050565b6001600160f81b031994909416845260609290921b6001600160601b03191660018401526015830152603582015260550190565b60006001600160601b0319808a60601b168352651d31b0b6361d60d11b6014840152808960601b16601a84015287602e8401526001600160801b03198760801b16604e840152808660601b16605e84015250836072830152825161174f816092850160208701611575565b9190910160920198975050505050505050565b828152604060208201526000610c746040830184611599565b60006001600160601b0319808960601b168352681d31b932b0ba32991d60b91b6014840152808860601b16601d840152508560318301526001600160801b03198560801b16605183015283606183015282516117de816081850160208701611575565b91909101608101979650505050505050565b60006001600160601b0319808860601b168352671d31b932b0ba329d60c11b6014840152808760601b16601c840152508460308301526001600160801b03198460801b166050830152825161184c816060850160208701611575565b91909101606001969550505050505056fe608060405234801561001057600080fd5b5060405161082338038061082383398101604081905261002f91610060565b600080546001600160a01b039092166001600160a01b03199283161790556001805490911633178155600255610090565b60006020828403121561007257600080fd5b81516001600160a01b038116811461008957600080fd5b9392505050565b6107848061009f6000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063b2bdfa7b1161005b578063b2bdfa7b146100d9578063cf5ba53f14610104578063f0329f6b14610117578063fe9840791461012a57600080fd5b806326e263d5146100825780636dbf2fa0146100b3578063affed0e0146100c8575b600080fd5b600254600160801b90046001600160801b03165b6040516001600160801b0390911681526020015b60405180910390f35b6100c66100c1366004610520565b61013d565b005b6002546001600160801b0316610096565b6000546100ec906001600160a01b031681565b6040516001600160a01b0390911681526020016100aa565b6100ec610112366004610658565b6102c5565b6001546100ec906001600160a01b031681565b6100ec610138366004610695565b6103f1565b6000546001600160a01b031633148061016057506001546001600160a01b031633145b6101855760405162461bcd60e51b815260040161017c906106dc565b60405180910390fd5b60028054600160801b90046001600160801b03169060106101a58361070a565b91906101000a8154816001600160801b0302191690836001600160801b031602179055505060004790508381101561021f5760405162461bcd60e51b815260206004820152601d60248201527f616d6f756e7420657863656564732077616c6c65742062616c616e6365000000604482015260640161017c565b6000856001600160a01b031685858560405161023c92919061073e565b60006040518083038185875af1925050503d8060008114610279576040519150601f19603f3d011682016040523d82523d6000602084013e61027e565b606091505b50509050806102bd5760405162461bcd60e51b815260206004820152600b60248201526a18d85b1b0819985a5b195960aa1b604482015260640161017c565b505050505050565b600080546001600160a01b03163314806102e957506001546001600160a01b031633145b6103055760405162461bcd60e51b815260040161017c906106dc565b600280546001600160801b031690600061031e8361070a565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506002601081819054906101000a90046001600160801b0316809291906103689061070a565b91906101000a8154816001600160801b0302191690836001600160801b031602179055505060008251602084016000f09050803b6103a557600080fd5b6001600160a01b0381166103eb5760405162461bcd60e51b815260206004820152600d60248201526c18dc99585d194819985a5b1959609a1b604482015260640161017c565b92915050565b600080546001600160a01b031633148061041557506001546001600160a01b031633145b6104315760405162461bcd60e51b815260040161017c906106dc565b600280546001600160801b031690600061044a8361070a565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506002601081819054906101000a90046001600160801b0316809291906104949061070a565b91906101000a8154816001600160801b0302191690836001600160801b03160217905550506000838351602085016000f59050803b6104d257600080fd5b6001600160a01b0381166105195760405162461bcd60e51b815260206004820152600e60248201526d18dc99585d194c8819985a5b195960921b604482015260640161017c565b9392505050565b6000806000806060858703121561053657600080fd5b84356001600160a01b038116811461054d57600080fd5b935060208501359250604085013567ffffffffffffffff8082111561057157600080fd5b818701915087601f83011261058557600080fd5b81358181111561059457600080fd5b8860208285010111156105a657600080fd5b95989497505060200194505050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126105dc57600080fd5b813567ffffffffffffffff808211156105f7576105f76105b5565b604051601f8301601f19908116603f0116810190828211818310171561061f5761061f6105b5565b8160405283815286602085880101111561063857600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561066a57600080fd5b813567ffffffffffffffff81111561068157600080fd5b61068d848285016105cb565b949350505050565b600080604083850312156106a857600080fd5b82359150602083013567ffffffffffffffff8111156106c657600080fd5b6106d2858286016105cb565b9150509250929050565b6020808252601490820152733737ba1037bbb732b91037b91036b0b730b3b2b960611b604082015260600190565b60006001600160801b0380831681810361073457634e487b7160e01b600052601160045260246000fd5b6001019392505050565b818382376000910190815291905056fea2646970667358221220841de80669cb333e14a807ea98c1e79f1e9ca9e162982ea5742bc4c7c40ef5e364736f6c63430008110033a2646970667358221220c4a48b194e2ce331cdd60b0d29a94b81770a9a666fa6bee2ed848b84cf02ee6a64736f6c63430008110033"

